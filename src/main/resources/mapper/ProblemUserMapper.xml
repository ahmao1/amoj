<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="amoj.dao.ProblemUserDao" >

    <select id="findSubmitProblemIdByUserId" parameterType="long"  resultType="long">
        select problem_id from problem_user where user_id = #{userId}
    </select>

    <select id="findSolveProblemIdByUserId" parameterType="long" resultType="long">
        select problem_id from problem_user where user_id = #{userId} and solve = 1
    </select>

    <select id="findUnSolveProblemIdByUserId" parameterType="long" resultType="long">
        select problem_id from problem_user where user_id = #{userId} and solve = 0
    </select>

    <select id="findProblemUser" resultType="amoj.entity.ProblemUser">
        select * from problem_user where user_id = #{userId} and problem_id = #{problemId}
    </select>

    <insert id="addProblemUser" parameterType="amoj.entity.ProblemUser">
        insert into problem_user(problem_id,user_id,state)
        values (#{problemId} ,#{user_id},0)
    </insert>

    <update id="updateProblemUser">
        update problem_user set state = 1 where problem_id = #{problemId} and user_id = #{userId}
    </update>

    <delete id="deleteByUserId" parameterType="long">
        delete from user where user_id = #{userId}
    </delete>
    <delete id="deleteByProblemId" parameterType="long">
        delete from user where problem_id = #{problemId}
    </delete>
</mapper>